<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vota #53 Martin Carabal√≠ - Pacto Hist√≥rico</title>
    <!-- D3.js para el mapa -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f5f5 0%, #e8f4f8 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        header {
            background: linear-gradient(135deg, #003366 0%, #004d99 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            text-align: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header-text {
            text-align: center;
        }

        .logo {
            width: 260px;
            height: 260px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 2.5rem;
            color: #003366;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            border: 5px solid #ffd700;
            flex-shrink: 0;
            overflow: hidden;
        }

        .logo img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            object-position: center;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            opacity: 0.9;
        }

        .lema {
            font-size: 1.3rem;
            font-style: italic;
            margin-top: 0.5rem;
            opacity: 0.8;
        }

        .numero-candidato {
            background: #ffd700;
            color: #003366;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-top: 0.5rem;
            font-size: 1.2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .party-info {
            background: white;
            padding: 2.5rem;
            margin: 2rem 0;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #004d99;
        }
        
        /* =============================== */
        /* üéØ SISTEMA DE FILTROS */
        /* =============================== */
        .filters-section {
            background: white;
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .filters-section h2 {
            color: #003366;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .search-container {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-bottom: 1.5rem;
        }

        .search-box {
            flex: 1;
            min-width: 300px;
            padding: 0.8rem 1rem;
            border: 2px solid #e6f2ff;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .search-box:focus {
            outline: none;
            border-color: #004d99;
        }

        .filter-select {
            padding: 0.8rem 1rem;
            border: 2px solid #e6f2ff;
            border-radius: 10px;
            font-size: 1rem;
            background: white;
            min-width: 200px;
            cursor: pointer;
        }

        .filter-select:focus {
            outline: none;
            border-color: #004d99;
        }

        /* =============================== */
        /* üéØ BOT√ìN AGREGAR DELEGADO */
        /* =============================== */
        .btn-agregar {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
            min-width: 180px;
        }

        .btn-agregar:hover {
            background: linear-gradient(135deg, #218838, #1e9e8a);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(40, 167, 69, 0.4);
        }

        .btn-agregar:active {
            transform: translateY(0);
        }

        .filter-info {
            text-align: center;
            color: #666;
            font-size: 0.9rem;
        }

        /* =============================== */
        /* üó∫Ô∏è MAPA DE COLOMBIA */
        /* =============================== */
        .map-section {
            background: white;
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .map-section h2 {
            color: #003366;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        #colombia-map {
            width: 100%;
            height: 1000px;
            background: #f8fbff;
            border-radius: 10px;
            overflow: hidden;
        }

        .department-path {
            fill: #ff9c03;
            stroke: #cc7d02;
            stroke-width: 1;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .department-path:hover {
            fill: #e68a00;
            stroke: #b36b00;
            stroke-width: 2;
        }

        .department-path.seleccionado {
            fill: #cc7d02;
            stroke: #ff9c03;
            stroke-width: 2;
        }
        
        .department-path.filtrado {
            opacity: 0.3 !important;
            fill: #cccccc !important;
        }

        .department-label {
            font-size: 12px;
            font-weight: bold;
            fill: #003366;
            pointer-events: none;
            text-anchor: middle;
        }

        .map-tooltip {
            position: absolute;
            background: rgba(0, 51, 102, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        /* =============================== */
        /* üéØ MODAL DE DELEGADOS */
        /* =============================== */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 600px;
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close-modal {
            position: absolute;
            right: 1.5rem;
            top: 1rem;
            font-size: 2rem;
            color: #666;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .close-modal:hover {
            color: #003366;
        }

        /* =============================== */
        /* üéØ MODAL FORMULARIO */
        /* =============================== */
        .modal-formulario {
            display: none;
            position: fixed;
            z-index: 1001;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        .modal-form-content {
            background: white;
            margin: 5% auto;
            padding: 2.5rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 90%;
            max-width: 500px;
            position: relative;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #003366;
        }

        .form-control {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 2px solid #e6f2ff;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: #004d99;
        }

        .btn-submit {
            background: linear-gradient(135deg, #003366, #004d99);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .btn-submit:hover {
            background: linear-gradient(135deg, #002244, #003366);
            transform: translateY(-2px);
        }

        .btn-submit:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            opacity: 0.7;
            pointer-events: none;
        }

        .alert {
            padding: 1rem;
            border-radius: 10px;
            margin-bottom: 1rem;
            text-align: center;
            font-weight: bold;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        #modal-titulo {
            color: #003366;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid #004d99;
            padding-bottom: 0.5rem;
        }

        .delegado-item {
            background: #f8fbff;
            padding: 1.2rem;
            margin-bottom: 1rem;
            border-radius: 10px;
            border-left: 4px solid #004d99;
            transition: transform 0.2s ease;
        }

        .delegado-item:hover {
            transform: translateX(5px);
            background: #e6f2ff;
        }

        .delegado-nombre {
            font-weight: bold;
            color: #003366;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .delegado-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .delegado-comision {
            background: #003366;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        .delegado-votos {
            background: #004d99;
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 15px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .delegado-votos:hover {
            background: #003366;
            transform: scale(1.05);
        }

        footer {
            background: linear-gradient(135deg, #003366 0%, #002244 100%);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }

        .no-results {
            text-align: center;
            color: #666;
            padding: 2rem;
            font-style: italic;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            h2 { font-size: 1.5rem; }
            .modal-content { margin: 10% auto; width: 95%; }
            .search-container { flex-direction: column; }
            .search-box, .filter-select { min-width: 100%; }
            #colombia-map { height: 500px !important; }
            .department-label { font-size: 8px !important; }
            .map-tooltip { font-size: 12px !important; }
        }
    </style>
</head>
<body>
   <header>
    <div class="header-content">
        <div class="logo">
            <img src="Martin.jpg" alt="Martin Carabal√≠ - Candidato #53">
        </div>
        <div class="header-text">
        <h1>Vota Senado #53 Martin Carabal√≠</h1>
        
        <p class="lema">"Todo Parece imposible hasta que se hace"</p>
        <div class="numero-candidato">#53</div>
    </header>

    <div class="container">
        <section class="party-info" style="display: none;">
            <h2>Nuestro Compromiso con Colombia</h2>
            <p>El Pacto Hist√≥rico representa la esperanza de un cambio verdadero para Colombia. Con Martin Carabal√≠ como candidato, trabajamos por una naci√≥n m√°s justa, equitativa y llena de oportunidades para todos los colombianos.</p>
        </section>

        <!-- =============================== -->
        <!-- üéØ SISTEMA DE FILTROS -->
        <!-- =============================== -->
        <section class="filters-section">
            <h2>Delegados por Departamento</h2>
            <div class="search-container">
                <input type="text" id="search-input" class="search-box" placeholder="üîç Buscar delegado por nombre...">
                <select id="comision-filter" class="filter-select">
                    <option value="">Todas las comisiones</option>
                    <!-- Las opciones se generan autom√°ticamente desde JavaScript -->
                </select>
                <select id="departamento-filter" class="filter-select">
                    <option value="">Todos los departamentos</option>
                    <!-- Las opciones se generan autom√°ticamente desde JavaScript -->
                </select>
                <button id="btn-agregar-delegado" class="btn-agregar">
                    ‚ûï Agregar Delegado
                </button>
            </div>
            <div class="filter-info">
                <p id="filter-results">Mostrando todos los delegados</p>
            </div>
        </section>

        <!-- =============================== -->
        <!-- üó∫Ô∏è MAPA DE COLOMBIA -->
        <!-- =============================== -->
        <section class="map-section">
            <h2>Departamentos de Colombia</h2>
            <div id="colombia-map"></div>
        </section>
    </div>

    <!-- =============================== -->
    <!-- üéØ MODAL DE DELEGADOS -->
    <!-- =============================== -->
    <div id="modal-delegados" class="modal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h3 id="modal-titulo">Delegados - Departamento</h3>
            <div id="lista-delegados"></div>
        </div>
    </div>

    <!-- =============================== -->
    <!-- üéØ MODAL FORMULARIO AGREGAR DELEGADO -->
    <!-- =============================== -->
    <div id="modal-formulario" class="modal-formulario">
        <div class="modal-form-content">
            <span class="close-modal-form">&times;</span>
            <h3 style="color: #003366; margin-bottom: 1.5rem; text-align: center;">
                ‚ûï Agregar Nuevo Delegado
            </h3>
            
            <div id="form-alert"></div>
            
            <form id="form-delegado">
                <div class="form-group">
                    <label for="nombre-delegado">Nombre Completo:</label>
                    <input type="text" id="nombre-delegado" class="form-control" 
                           placeholder="Ej: Mar√≠a Garc√≠a L√≥pez" required>
                </div>
                
                <div class="form-group">
                    <label for="departamento-delegado">Departamento:</label>
                    <select id="departamento-delegado" class="form-control" required>
                        <option value="">Selecciona un departamento</option>
                        <!-- Se llena autom√°ticamente con JavaScript -->
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="comision-delegado">Comisi√≥n:</label>
                    <select id="comision-delegado" class="form-control" required>
                        <option value="">Selecciona una comisi√≥n</option>
                        <option value="COMISI√ìN PRIMERA">COMISI√ìN PRIMERA</option>
                        <option value="COMISI√ìN SEGUNDA">COMISI√ìN SEGUNDA</option>
                        <option value="COMISI√ìN TERCERA">COMISI√ìN TERCERA</option>
                        <option value="COMISI√ìN CUARTA">COMISI√ìN CUARTA</option>
                        <option value="COMISI√ìN QUINTA">COMISI√ìN QUINTA</option>
                        <option value="COMISI√ìN SEXTA">COMISI√ìN SEXTA</option>
                        <option value="COMISI√ìN S√âPTIMA">COMISI√ìN S√âPTIMA</option>
                        <option value="ALIADO">ALIADO</option>
                    </select>
                </div>
                
                <button type="submit" id="btn-submit" class="btn-submit">
                    Guardar Delegado
                </button>
            </form>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 Martin Carabal√≠. Todos los derechos reservados.</p>
            <p>#53 - Todo Parece imposible hasta que se hace</p>
        </div>
    </footer>

    <script>
        // ============================================
        // üîß DATOS DE DELEGADOS - EDITAR AQU√ç
        // ============================================

        const delegadosPorDepartamento = {
            "Amazonas": [
                {
                    nombre: "Hernando Mosquera Gamboa",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_amazonas"
                }
            ],
            
            "Antioquia": [
                {
                    nombre: "Beatriz Elena Quesada Cuesta",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_antioquia1"
                },
                {
                    nombre: "Fulgencia Serna Chaverra",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_antioquia2"
                },
                {
                    nombre: "Maria Cristina Lloreda Mena",
                    comision: "COMISI√ìN S√âPTIMA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_antioquia3"
                }
            ],
            
            "Arauca": [
                {
                    nombre: "Jhon Jairo Hurtado Hurtado",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_arauca1"
                },
                {
                    nombre: "Walberto Berdugo Arellanos",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_arauca2"
                }
            ],
            
            "Atl√°ntico": [
                {
                    nombre: "Luis Cassiani Amador",
                    comision: "COMISI√ìN TERCERA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_atlantico1"
                },
                {
                    nombre: "Marco Casiani Ca√±ate",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_atlantico2"
                },
                {
                    nombre: "Gilberto Lemos Sanchez",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_atlantico3"
                },
                {
                    nombre: "Deibys Enrique Hernandez Cardona",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_atlantico4"
                },
                {
                    nombre: "Ronald Jose Valdes Padilla",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_atlantico5"
                }
            ],
            
            "SANTAFE DE BOGOTA D.C": [
                {
                    nombre: "Anyela Mar√≠a Guanga Marquinez",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_bogota1"
                },
                {
                    nombre: "Nieves Mercedes Lemos Garcia",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_bogota2"
                },
                {
                    nombre: "Ricardo Hurtado Bravo",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_bogota3"
                },
                {
                    nombre: "Alejandrina Vernaza Qui√±ones",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_bogota4"
                },
                {
                    nombre: "Luz Aida Angulo Angulo",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_bogota5"
                },
                {
                    nombre: "Aduer Anibal Qui√±ones Tenorio",
                    comision: "COMISI√ìN CUARTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_bogota6"
                }
            ],
            
            "Bol√≠var": [
                {
                    nombre: "Keinel Yoel Simarra Cassiani",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_bolivar1"
                },
                {
                    nombre: "Arnulfo Cardosi Julio",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_bolivar2"
                },
                {
                    nombre: "Henry Mart√≠n Guizamano Vivas",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_bolivar3"
                },
                {
                    nombre: "Williams Hernandes Graus",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_bolivar4"
                },
                {
                    nombre: "Miguel √Ångel Cassiani Chico",
                    comision: "COMISI√ìN S√âPTIMA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_bolivar5"
                }
            ],
            
            "Boyac√°": [
                {
                    nombre: "B√°rbara Machado Nagles",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_boyaca1"
                },
                {
                    nombre: "Lucelly Cordoba",
                    comision: "COMISI√ìN CUARTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_boyaca2"
                }
            ],
            
            "Caldas": [
                {
                    nombre: "Alonso Moreno Hernandez",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_caldas1"
                },
                {
                    nombre: "Liseth Barbosa Rojas",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_caldas2"
                }
            ],
            
            "Caquet√°": [
                {
                    nombre: "Juan Alexy Rodriguez Qui√±ones",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_caqueta"
                }
            ],
            
            "Casanare": [
                {
                    nombre: "Sugeirys Milena Camacho Blandon",
                    comision: "COMISI√ìN S√âPTIMA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_casanare1"
                },
                {
                    nombre: "Gener Nazarit D√≠az",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_casanare2"
                },
                {
                    nombre: "Yasmid Banguero",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_casanare3"
                }
            ],
            
            "Cauca": [
                {
                    nombre: "Roque Alfredo Riascos",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca1"
                },
                {
                    nombre: "Yaneth Mosquera Rivera",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca2"
                },
                {
                    nombre: "Jhon Jairo Melecio",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca3"
                },
                {
                    nombre: "Luis David Velasco",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca4"
                },
                {
                    nombre: "Wilson Osvaldo Gonzalez",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca5"
                },
                {
                    nombre: "Paola Andrea Ararat Nzary",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca6"
                },
                {
                    nombre: "Lisifrey Ararat",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca7"
                },
                {
                    nombre: "Carlos Marino Valencia",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca8"
                },
                {
                    nombre: "Rosa Maria Monta√±o Colorado",
                    comision: "COMISI√ìN S√âPTIMA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca9"
                },
                {
                    nombre: "Dionisio Rodriguez Paz",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca10"
                },
                {
                    nombre: "Nestor Segundo Hurtado Hurtado",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca11"
                },
                {
                    nombre: "Wilner Perlaza Ortis",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca12"
                },
                {
                    nombre: "Nielsen Saac Nu√±ez",
                    comision: "ALIADO",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cauca13"
                }
            ],
            
            "Cesar": [
                {
                    nombre: "Elvis Pardo Pi√±eres",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cesar1"
                },
                {
                    nombre: "Jose Tomas Marquez Fragozo",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cesar2"
                },
                {
                    nombre: "Indra Nu√±ez Anaya",
                    comision: "COMISI√ìN CUARTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cesar3"
                }
            ],
            
            "Choc√≥": [
                {
                    nombre: "Emilce Perea Cuesta",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_choco1"
                },
                {
                    nombre: "Elizabet Moreno Barco",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_choco2"
                },
                {
                    nombre: "Francisco Valerio Murillo Reyes",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_choco3"
                },
                {
                    nombre: "Jose Aristarco Mosquera",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_choco4"
                },
                {
                    nombre: "Pedro Julio Rivas Mena",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_choco5"
                },
                {
                    nombre: "Jose Americo Mosquera Berrio",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_choco6"
                },
                {
                    nombre: "Valerio Santos Andrades Mosquera",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_choco7"
                },
                {
                    nombre: "Francisco Javier Mosquera Caicedo",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_choco8"
                },
                {
                    nombre: "Deyler Mosquera Martinez",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_choco9"
                },
                {
                    nombre: "German Antonio Marmolejo Renteria",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_choco10"
                },
                {
                    nombre: "Jose Ramiro Rodriguez Correa",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_choco11"
                }
            ],
            
            "C√≥rdoba": [
                {
                    nombre: "Mirna Luz Lloreda Cordoba",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cordoba1"
                },
                {
                    nombre: "Miguel Angel Renter√≠a C√≥rdoba",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cordoba2"
                },
                {
                    nombre: "Ricardo Mart√≠nez Cantillo",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cordoba3"
                }
            ],
            
            "Cundinamarca": [
                {
                    nombre: "Carlos Hernan Palacios Moreno",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cundinamarca1"
                },
                {
                    nombre: "Carmen Castro C√≥rdoba",
                    comision: "COMISI√ìN PRIMERA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cundinamarca2"
                },
                {
                    nombre: "Edwin Jos√© Guerrero Mosquera",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cundinamarca3"
                },
                {
                    nombre: "Mirla del Carmen Lloreda Gracia",
                    comision: "COMISI√ìN S√âPTIMA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_cundinamarca4"
                }
            ],
            
            "Guain√≠a": [
                {
                    nombre: "Bisneyder Mart√≠nez Renter√≠a",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_guainia1"
                },
                {
                    nombre: "Carmen Idalia Cetre Mosquera",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_guainia2"
                }
            ],
            
            "La Guajira": [
                {
                    nombre: "Kendrys Paola Reyes Torres",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_guajira1"
                },
                {
                    nombre: "Nelson Solano Duarte",
                    comision: "COMISI√ìN S√âPTIMA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_guajira2"
                },
                {
                    nombre: "Evaristo De Arma Cordoba",
                    comision: "COMISI√ìN TERCERA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_guajira3"
                },
                {
                    nombre: "Eber Joaquin Ramos Aregoces",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_guajira4"
                },
                {
                    nombre: "Amilcar Hernando Gomez Toro",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_guajira5"
                }
            ],
            
            "Guaviare": [
                {
                    nombre: "Nelly Murillo L√≥pez",
                    comision: "COMISI√ìN S√âPTIMA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_guaviare1"
                },
                {
                    nombre: "Dennis Juseth Atuesta Ibarguen",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_guaviare2"
                },
                {
                    nombre: "Cristian Andr√©s Monta√±o G√≥mez",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_guaviare3"
                }
            ],
            
            "Huila": [
                {
                    nombre: "Victor Vladimir Vallecilla G√≥ngora",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_huila1"
                },
                {
                    nombre: "Francisco Alexis Arce Arango",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_huila2"
                }
            ],
            
            "Magdalena": [
                {
                    nombre: "Sandra Chiquillo Julio",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_magdalena1"
                },
                {
                    nombre: "Jorge Emilio Montenegro Esquea",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_magdalena2"
                },
                {
                    nombre: "Matilde Ester Maestre Rivera",
                    comision: "COMISI√ìN CUARTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_magdalena3"
                },
                {
                    nombre: "Yomaira Olivo P√©rez",
                    comision: "COMISI√ìN S√âPTIMA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_magdalena4"
                }
            ],
            
            "Meta": [
                {
                    nombre: "Kelly Moran",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_meta1"
                },
                {
                    nombre: "Debangio Valencia Chara",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_meta2"
                },
                {
                    nombre: "Marta Yaneth Lloreda Gracia",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_meta3"
                }
            ],
            
            "Nari√±o": [
                {
                    nombre: "Luz Dary Ortiz Bola√±os",
                    comision: "COMISI√ìN S√âPTIMA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o1"
                },
                {
                    nombre: "Kenny Fabiano Tapia Acosta",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o2"
                },
                {
                    nombre: "Jeison Pineda Olaya",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o3"
                },
                {
                    nombre: "Aquileo Mosquera Copete",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o4"
                },
                {
                    nombre: "Jonny Ordo√±ez Salazar",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o5"
                },
                {
                    nombre: "Albeiro Sinisterra Segura",
                    comision: "COMISI√ìN S√âPTIMA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o6"
                },
                {
                    nombre: "Elsa Lucia Caldas Gongora",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o7"
                },
                {
                    nombre: "Luz Mirley Monta√±o Ru√≠z",
                    comision: "COMISI√ìN CUARTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o8"
                },
                {
                    nombre: "H√©ctor Pablo Cabezas Cortes",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o9"
                },
                {
                    nombre: "Hilda Nayibe Hurtado Espa√±a",
                    comision: "COMISI√ìN PRIMERA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o10"
                },
                {
                    nombre: "Jairo Rodolfo Torres Montano",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o11"
                },
                {
                    nombre: "Cesar Armando Arboleda",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o12"
                },
                {
                    nombre: "Marleni Cisnero",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o13"
                },
                {
                    nombre: "Marino Antonio Qui√±ones Angulo",
                    comision: "COMISI√ìN CUARTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o14"
                },
                {
                    nombre: "Nixon Ortiz",
                    comision: "COMISI√ìN TERCERA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o15"
                },
                {
                    nombre: "Lady Lorena Riasco Sevillano",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o16"
                },
                {
                    nombre: "Ivan Rodolfo Valencia Correa",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o17"
                },
                {
                    nombre: "Harrison Esneider Vidal",
                    comision: "COMISI√ìN TERCERA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_nari√±o18"
                }
            ],
            
            "Putumayo": [
                {
                    nombre: "Arley Jos√© Qui√±ones Ort√≠z",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_putumayo1"
                },
                {
                    nombre: "Wilson Moreno Mosquer",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_putumayo2"
                },
                {
                    nombre: "Vicente William Castillo Delgado",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_putumayo3"
                }
            ],
            
            "Quind√≠o": [
                {
                    nombre: "Bernardo C√≥rdoba Cuesta",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_quindio1"
                },
                {
                    nombre: "Luz Aida Ibarra Ibarra",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_quindio2"
                }
            ],
            
            "Risaralda": [
                {
                    nombre: "Aristides Pino Mosquera",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_risaralda1"
                },
                {
                    nombre: "Juan Bautista Mosquera Lloreda",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_risaralda2"
                }
            ],
            
            "Archipi√©lago de San Andr√©s, Providencia y Santa Catalina": [
                {
                    nombre: "Jairo Rodriguez Davis",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_san_andres1"
                },
                {
                    nombre: "Charles Ronald Cotes Torres",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_san_andres2"
                },
                {
                    nombre: "Roylie Eduardo Hawkins Hawkins",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_san_andres3"
                }
            ],
            
            "Santander": [
                {
                    nombre: "Wilson Arias Ardila",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_santander"
                }
            ],
            
            "Sucre": [
                {
                    nombre: "Juan Carlos Bayter",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_sucre1"
                },
                {
                    nombre: "Glorimer Rodriguez Hoyos",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_sucre2"
                },
                {
                    nombre: "Guillermo Castro Teheran",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_sucre3"
                }
            ],
            
            "Tolima": [
                {
                    nombre: "Andres Felipe Velasquez Mosquera",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_tolima1"
                },
                {
                    nombre: "Zandy Zarley Perea",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_tolima2"
                }
            ],
            
            "Valle del Cauca": [
                {
                    nombre: "Adriana Damaris Plaza Lourido",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle1"
                },
                {
                    nombre: "Erlendi Cuero",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle2"
                },
                {
                    nombre: "Angel Eduardo Murillo Mosquera",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle3"
                },
                {
                    nombre: "Daniel Jose Obando Carabali",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle4"
                },
                {
                    nombre: "Gonzalo Vallecilla Caicedo",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle5"
                },
                {
                    nombre: "Hector Didio Mosquera Caicedo",
                    comision: "COMISI√ìN PRIMERA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle6"
                },
                {
                    nombre: "Jairo Andres Rodriguez Palacios",
                    comision: "COMISI√ìN TERCERA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle7"
                },
                {
                    nombre: "Johanna Caicedo Sinisterra",
                    comision: "COMISI√ìN S√âPTIMA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle8"
                },
                {
                    nombre: "Jose Antonio Hinestroza Mosquera",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle9"
                },
                {
                    nombre: "Cesar Augusto Cabezas Riascos",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle10"
                },
                {
                    nombre: "Fabio Garces",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle11"
                },
                {
                    nombre: "Martha Cecilia Jord√°n Arroyo",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle12"
                },
                {
                    nombre: "Marlenis Hinestroza Sinisterra",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle13"
                },
                {
                    nombre: "Oscar Alberto Lenis Ibarguen",
                    comision: "COMISI√ìN PRIMERA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle14"
                },
                {
                    nombre: "Wilson Renteria Riascos",
                    comision: "COMISI√ìN PRIMERA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_valle15"
                }
            ],
            
            "Vaup√©s": [
                {
                    nombre: "Gloria Lorena Balanta Mina",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_vaupes1"
                },
                {
                    nombre: "James Alexis Mina Orejuela",
                    comision: "COMISI√ìN QUINTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_vaupes2"
                },
                {
                    nombre: "Luis Fernando Lasso Mina",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_vaupes3"
                }
            ],
            
            "Vichada": [
                {
                    nombre: "Willinton Odiel Florez Mena",
                    comision: "COMISI√ìN SEGUNDA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_vichada1"
                },
                {
                    nombre: "Omar Bonilla Caicedo",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_vichada2"
                }
            ],
            
            "V√≠ctimas": [
                {
                    nombre: "Edinson Banguero Palomino",
                    comision: "COMISI√ìN SEXTA",
                    votos: 0,
                    enlace: "https://docs.google.com/spreadsheets/d/ejemplo_victimas"
                }
            ]
        };

        // ============================================
        // üó∫Ô∏è C√ìDIGO DEL MAPA Y FUNCIONALIDAD
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            const modal = document.getElementById('modal-delegados');
            const modalTitulo = document.getElementById('modal-titulo');
            const listaDelegados = document.getElementById('lista-delegados');
            const closeModal = document.querySelector('.close-modal');
            const searchInput = document.getElementById('search-input');
            const comisionFilter = document.getElementById('comision-filter');
            const departamentoFilter = document.getElementById('departamento-filter');
            const filterResults = document.getElementById('filter-results');
           const mapContainer = document.getElementById('colombia-map');

            let comisionesUnicas = new Set();
            let departamentosData = [];
            let mapaCargado = false;

            // Inicializar la aplicaci√≥n
            function inicializar() {
                cargarFiltros();
                cargarMapaColombia();
                agregarEventListeners();
                actualizarResultados();
            }

            // Cargar el mapa de Colombia
            function cargarMapaColombia() {
                const width = mapContainer.clientWidth;
                const height = 1000;

                const svg = d3.select("#colombia-map")
                    .append("svg")
                    .attr("width", width)
                    .attr("height", height);

                const g = svg.append("g");

                // Crear tooltip
                const tooltip = d3.select("body")
                    .append("div")
                    .attr("class", "map-tooltip")
                    .style("opacity", 0);

                // Cargar el GeoJSON
                d3.json("https://gist.githubusercontent.com/john-guerra/43c7656821069d00dcbc/raw/3aadedf47badbdac823b00dbe259f6bc6d9e1899/colombia.geo.json")
                    .then(function(colombia) {
                        console.log("‚úÖ GeoJSON cargado:", colombia);
                        
                        const isMobile = window.innerWidth < 768;
                        const baseScale = isMobile ? 2000 : 3000;

                        let center = [-74, 4.5];
                        let translate = [width / 2, height / 2];

                        if (isMobile) {
                            translate = [width / 2, height / 1.8];
                        }

                        const projection = d3.geoMercator()
                            .center(center)
                            .scale(baseScale)
                            .translate(translate);

                        const path = d3.geoPath().projection(projection);

                        // DIBUJAR FORMAS PRIMERO (paths)
                        g.selectAll("path")
                            .data(colombia.features)
                            .enter()
                            .append("path")
                            .attr("class", "department-path")
                            .attr("d", path)
                            .attr("data-depto", d => d.properties.NOMBRE_DPT)
                            .on("mouseover", function(event, d) {
                                const deptoMapa = d.properties.NOMBRE_DPT;
                                
                                let cantidad = 0;
                                let departamentoEncontrado = "";
                                
                                const nombreNormalizado = deptoMapa
                                    .toLowerCase()
                                    .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
                                    .replace(/[^a-z0-9 ]/g, '')
                                    .replace(/\s+/g, ' ')
                                    .trim();
                                
                                Object.keys(delegadosPorDepartamento).forEach(nombreDepto => {
                                    const nombreDeptoNormalizado = nombreDepto
                                        .toLowerCase()
                                        .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
                                        .replace(/[^a-z0-9 ]/g, '')
                                        .replace(/\s+/g, ' ')
                                        .trim();
                                    
                                    if (nombreNormalizado === nombreDeptoNormalizado || 
                                        nombreNormalizado.includes(nombreDeptoNormalizado) ||
                                        nombreDeptoNormalizado.includes(nombreNormalizado)) {
                                        departamentoEncontrado = nombreDepto;
                                        cantidad = delegadosPorDepartamento[nombreDepto].length;
                                    }
                                });
                                
                                tooltip.transition().duration(200).style("opacity", .9);
                                tooltip.html(`<strong>${deptoMapa}</strong><br/>${cantidad} delegado${cantidad !== 1 ? 's' : ''}`)
                                    .style("left", (event.pageX + 10) + "px")
                                    .style("top", (event.pageY - 28) + "px");

                                d3.select(this).style("fill", "#004d99");
                            })
                            .on("mouseout", function(d) {
                                tooltip.transition().duration(500).style("opacity", 0);
                                d3.select(this).style("fill", "#ff9c03");
                            })
                            .on("click", function(event, d) {
                                const depto = d.properties.NOMBRE_DPT;
                                mostrarDelegados(depto);
                                
                                g.selectAll(".department-path").style("fill", "#ff9c03");
                                d3.select(this).style("fill", "#cc7d02");
                            });

                        // LUEGO ETIQUETAS
                        g.selectAll("text")
                            .data(colombia.features)
                            .enter()
                            .append("text")
                            .attr("class", "department-label")
                            .attr("transform", d => `translate(${path.centroid(d)})`)
                            .attr("dy", ".35em")
                            .text(d => {
                                const nombre = d.properties.NOMBRE_DPT;
                                if (nombre === "Norte de Santander") return "N. Santander";
                                if (nombre === "Archipi√©lago de San Andr√©s") return "San Andr√©s";
                                if (nombre.length > 8) return nombre.substring(0, 8) + ".";
                                return nombre;
                            });

                        mapaCargado = true;
                    })
                    .catch(function(error) {
                        console.error("‚ùå Error cargando el mapa:", error);
                        mapContainer.innerHTML = `
                            <div style="text-align: center; padding: 2rem; color: #666;">
                                <h3>Error cargando el mapa</h3>
                                <p>No se pudo cargar el mapa de Colombia: ${error.message}</p>
                            </div>
                        `;
                    });
            }

            // Cargar opciones de filtros
            function cargarFiltros() {
                departamentosData = Object.keys(delegadosPorDepartamento).sort();

                // Cargar comisiones √∫nicas
                Object.values(delegadosPorDepartamento).forEach(delegados => {
                    delegados.forEach(delegado => {
                        if (delegado.comision) {
                            comisionesUnicas.add(delegado.comision);
                        }
                    });
                });

                // Agregar opciones de comisi√≥n al select
                comisionFilter.innerHTML = '<option value="">Todas las comisiones</option>';
                [...comisionesUnicas].sort().forEach(comision => {
                    const option = document.createElement('option');
                    option.value = comision;
                    option.textContent = comision;
                    comisionFilter.appendChild(option);
                });

                // Agregar opciones de departamento al select
                departamentoFilter.innerHTML = '<option value="">Todos los departamentos</option>';
                departamentosData.forEach(depto => {
                    const option = document.createElement('option');
                    option.value = depto;
                    option.textContent = depto;
                    departamentoFilter.appendChild(option);
                });
            }

            // Funci√≥n para mapear nombres entre GeoJSON y datos
            function mapearNombreDepartamento(nombreGeoJSON) {
                console.log("üîÑ Mapeando:", nombreGeoJSON);
                
                const mapeo = {
                    "Amazonas": "Amazonas",
                    "Antioquia": "Antioquia", 
                    "Arauca": "Arauca",
                    "Atl√°ntico": "Atl√°ntico",
                    "Bogot√°": "Bogot√° D.C.",
                    "Bol√≠var": "Bol√≠var",
                    "Boyac√°": "Boyac√°",
                    "Caldas": "Caldas",
                    "Caquet√°": "Caquet√°", 
                    "Casanare": "Casanare",
                    "Cauca": "Cauca",
                    "Cesar": "Cesar",
                    "Choc√≥": "Choc√≥",
                    "C√≥rdoba": "C√≥rdoba",
                    "Cundinamarca": "Cundinamarca",
                    "Guain√≠a": "Guain√≠a",
                    "Guaviare": "Guaviare",
                    "Huila": "Huila", 
                    "La Guajira": "La Guajira",
                    "Magdalena": "Magdalena",
                    "Meta": "Meta",
                    "Nari√±o": "Nari√±o",
                    "Norte de Santander": "Norte de Santander",
                    "Putumayo": "Putumayo",
                    "Quind√≠o": "Quind√≠o",
                    "Risaralda": "Risaralda", 
                    "Santander": "Santander",
                    "Sucre": "Sucre",
                    "Tolima": "Tolima",
                    "Valle del Cauca": "Valle del Cauca",
                    "Vaup√©s": "Vaup√©s",
                    "Vichada": "Vichada",
                    "Archipi√©lago de San Andr√©s, Providencia y Santa Catalina": "San Andr√©s"
                };
                
                const resultado = mapeo[nombreGeoJSON] || nombreGeoJSON;
                console.log("‚úÖ Resultado:", resultado);
                return resultado;
            }

            // Actualizar mapa basado en filtros
            function actualizarMapaConFiltros() {
                if (!mapaCargado) return;

                const searchTerm = searchInput.value.toLowerCase();
                const comisionSeleccionada = comisionFilter.value;
                const departamentoSeleccionado = departamentoFilter.value;

                const mapeoDepartamentos = {
                    "Amazonas": "Amazonas",
                    "Antioquia": "Antioquia", 
                    "Arauca": "Arauca",
                    "Atl√°ntico": "Atl√°ntico",
                    "Bogot√°": "Bogot√° D.C.", 
                    "Bol√≠var": "Bol√≠var",
                    "Boyac√°": "Boyac√°",
                    "Caldas": "Caldas",
                    "Caquet√°": "Caquet√°", 
                    "Casanare": "Casanare",
                    "Cauca": "Cauca",
                    "Cesar": "Cesar",
                    "Choc√≥": "Choc√≥",
                    "C√≥rdoba": "C√≥rdoba",
                    "Cundinamarca": "Cundinamarca",
                    "Guain√≠a": "Guain√≠a",
                    "Guaviare": "Guaviare",
                    "Huila": "Huila", 
                    "La Guajira": "La Guajira",
                    "Magdalena": "Magdalena",
                    "Meta": "Meta",
                    "Nari√±o": "Nari√±o",
                    "Norte de Santander": "Norte de Santander",
                    "Putumayo": "Putumayo",
                    "Quind√≠o": "Quind√≠o",
                    "Risaralda": "Risaralda", 
                    "Santander": "Santander",
                    "Sucre": "Sucre",
                    "Tolima": "Tolima",
                    "Valle del Cauca": "Valle del Cauca",
                    "Vaup√©s": "Vaup√©s",
                    "Vichada": "Vichada",
                    "Archipi√©lago de San Andr√©s, Providencia y Santa Catalina": "San Andr√©s"
                };

                d3.selectAll(".department-path")
                    .classed("filtrado", function(d) {
                        const deptoMapa = d.properties.NOMBRE_DPT;
                        const departamentoEnDatos = mapeoDepartamentos[deptoMapa] || deptoMapa;
                        const delegadosDelDepto = delegadosPorDepartamento[departamentoEnDatos] || [];
                        
                        if (delegadosDelDepto.length === 0) {
                            return true;
                        }
                        
                        const tieneDelegadosFiltrados = delegadosDelDepto.some(delegado => {
                            const coincideNombre = !searchTerm || delegado.nombre.toLowerCase().includes(searchTerm);
                            const coincideComision = !comisionSeleccionada || delegado.comision === comisionSeleccionada;
                            const coincideDepartamento = !departamentoSeleccionado || departamentoEnDatos === departamentoSeleccionado;
                            
                            return coincideNombre && coincideComision && coincideDepartamento;
                        });
                        
                        return !tieneDelegadosFiltrados;
                    });
            }

            // Agregar event listeners
            function agregarEventListeners() {
                closeModal.addEventListener('click', cerrarModal);
                window.addEventListener('click', (event) => {
                    if (event.target === modal) cerrarModal();
                });
                searchInput.addEventListener('input', function() {
                    actualizarResultados();
                    actualizarMapaConFiltros();
                });
                comisionFilter.addEventListener('change', function() {
                    actualizarResultados();
                    actualizarMapaConFiltros();
                });
                departamentoFilter.addEventListener('change', function() {
                    actualizarResultados();
                    actualizarMapaConFiltros();
                });

                window.addEventListener('resize', function() {
                    if (mapaCargado) {
                        console.log("üîÑ Redimensionando ventana...");
                        cargarMapaColombia();
                    }
                });
            }

            // Actualizar resultados basados en filtros
            function actualizarResultados() {
                const searchTerm = searchInput.value.toLowerCase();
                const comisionSeleccionada = comisionFilter.value;
                const departamentoSeleccionado = departamentoFilter.value;

                let delegadosFiltrados = 0;
                let departamentosConResultados = 0;

                departamentosData.forEach(depto => {
                    const delegados = delegadosPorDepartamento[depto] || [];
                    const delegadosFiltradosEnDepto = delegados.filter(delegado => {
                        const coincideNombre = delegado.nombre.toLowerCase().includes(searchTerm);
                        const coincideComision = !comisionSeleccionada || delegado.comision === comisionSeleccionada;
                        const coincideDepartamento = !departamentoSeleccionado || depto === departamentoSeleccionado;
                        
                        return coincideNombre && coincideComision && coincideDepartamento;
                    });

                    if (delegadosFiltradosEnDepto.length > 0) {
                        delegadosFiltrados += delegadosFiltradosEnDepto.length;
                        departamentosConResultados++;
                    }
                });

                let resultadosTexto = `Mostrando ${delegadosFiltrados} delegado${delegadosFiltrados !== 1 ? 's' : ''}`;
                if (comisionSeleccionada) resultadosTexto += ` en ${comisionSeleccionada}`;
                if (departamentoSeleccionado) resultadosTexto += ` de ${departamentoSeleccionado}`;
                if (searchTerm) resultadosTexto += ` que coinciden con "${searchTerm}"`;
                
                filterResults.textContent = resultadosTexto;
            }

            // Sistema de correcci√≥n de departamentos
            class NormalizadorDepartamentos {
                constructor() {
                    this.correcciones = {
                        "casamare": "Casanare",
                        "bogota d.c.": "Bogot√° D.C.", 
                        "bogota dc": "Bogot√° D.C.",
                        "bogota": "Bogot√° D.C.",
                        "la gugiira": "La Guajira",
                        "gugiira": "La Guajira",
                        "botivar": "Bol√≠var",
                        "gustafa": "Guain√≠a",
                        "hullo": "Huila",
                        "nurillo": "Nari√±o",
                        "otando": "Quind√≠o",
                        "risardada": "Risaralda",
                        "tolana": "Tolima",
                        "vuques": "Vaup√©s",
                        "aduito mayor": "Adulto Mayor",
                        "persona con discapacidad": "Persona con discapacidad",
                        "victimas": "V√≠ctimas"
                    };
                }

                normalizarTexto(texto) {
                    if (!texto) return '';
                    return texto.toString()
                        .toLowerCase()
                        .trim()
                        .normalize("NFD").replace(/[\u0300-\u036f]/g, "")
                        .replace(/[^a-z0-9 ]/g, '')
                        .replace(/\s+/g, ' ')
                        .trim();
                }

                corregirDepartamento(departamento) {
                    if (!departamento) return null;
                    const normalizado = this.normalizarTexto(departamento);
                    
                    if (this.correcciones[normalizado]) {
                        return this.correcciones[normalizado];
                    }
                    
                    return this.capitalizarTexto(departamento);
                }

                capitalizarTexto(texto) {
                    return texto.toLowerCase()
                        .split(' ')
                        .map(palabra => {
                            if (palabra === 'd.c.') return 'D.C.';
                            if (palabra === 'dc') return 'D.C.';
                            return palabra.charAt(0).toUpperCase() + palabra.slice(1);
                        })
                        .join(' ');
                }

                encontrarMejorCoincidencia(departamentoBuscado, listaDepartamentos) {
                    const corregido = this.corregirDepartamento(departamentoBuscado);
                    const normalizadoBuscado = this.normalizarTexto(corregido);

                    const coincidencias = listaDepartamentos.filter(depto => {
                        const normalizadoDisponible = this.normalizarTexto(depto);
                        return normalizadoDisponible === normalizadoBuscado;
                    });

                    return {
                        departamentoOriginal: departamentoBuscado,
                        departamentoCorregido: corregido,
                        coincidenciasExactas: coincidencias,
                        mejorCoincidencia: coincidencias.length > 0 ? coincidencias[0] : null,
                        encontrado: coincidencias.length > 0
                    };
                }
            }

            // Funci√≥n mejorada para mostrar delegados
            function mostrarDelegados(nombreDepartamento) {
                const normalizador = new NormalizadorDepartamentos();
                const todosDepartamentos = Object.keys(delegadosPorDepartamento);
                
                const resultadoCorreccion = normalizador.encontrarMejorCoincidencia(nombreDepartamento, todosDepartamentos);
                
                const departamentoFinal = resultadoCorreccion.encontrado ? resultadoCorreccion.mejorCoincidencia : nombreDepartamento;
                const delegados = delegadosPorDepartamento[departamentoFinal] || [];

                const searchTerm = searchInput.value.toLowerCase();
                const comisionSeleccionada = comisionFilter.value;
                const departamentoSeleccionado = departamentoFilter.value;

                const delegadosFiltrados = delegados.filter(delegado => {
                    const coincideNombre = delegado.nombre.toLowerCase().includes(searchTerm);
                    const coincideComision = !comisionSeleccionada || delegado.comision === comisionSeleccionada;
                    const coincideDepartamento = !departamentoSeleccionado || nombreDepartamento === departamentoSeleccionado;
                    
                    return coincideNombre && coincideComision && coincideDepartamento;
                });

                modalTitulo.textContent = `Delegados - ${nombreDepartamento} (${delegadosFiltrados.length})`;
                listaDelegados.innerHTML = '';

                if (delegadosFiltrados.length === 0) {
                    listaDelegados.innerHTML = `
                        <div class="no-results">
                            <p>No hay delegados que coincidan con los filtros aplicados.</p>
                            <p><small>Departamento: ${nombreDepartamento}</small></p>
                        </div>
                    `;
                } else {
                    delegadosFiltrados.forEach(delegado => {
                        const delegadoElement = document.createElement('div');
                        delegadoElement.className = 'delegado-item';
                        delegadoElement.innerHTML = `
                            <div class="delegado-nombre">${delegado.nombre}</div>
                            <div class="delegado-info">
                                <span class="delegado-comision">${delegado.comision}</span>
                                <a href="${delegado.enlace}" target="_blank" class="delegado-votos" 
                                   onclick="event.stopPropagation();">
                                    ${delegado.votos.toLocaleString()} votos
                                </a>
                            </div>
                        `;
                        listaDelegados.appendChild(delegadoElement);
                    });
                }

                modal.style.display = 'block';
            }

            function cerrarModal() {
                modal.style.display = 'none';
                d3.selectAll(".department-path").classed("seleccionado", false);
            }

            // Inicializar la aplicaci√≥n
            inicializar();
        });

        // ============================================
        // üîó CONEXI√ìN INTELIGENTE CON TU GOOGLE SHEETS
        // ============================================

        class ConexionInteligente {
            constructor() {
                this.sheetId = '1yLszln1_j6ZIGw86-CGWdfEPWJr3qqVGaCwk668af54';
                this.nombresHojasCache = new Map();
            }

            async encontrarHojaDelegado(nombreDelegado) {
                const formatos = this.generarFormatosNombre(nombreDelegado);
                
                for (const formato of formatos) {
                    try {
                        const url = `https://docs.google.com/spreadsheets/d/${this.sheetId}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(formato)}`;
                        const response = await fetch(url);
                        const text = await response.text();
                        
                        if (text && !text.includes('No table data') && text.length > 100) {
                            console.log(`‚úÖ Encontrada hoja: "${formato}" para ${nombreDelegado}`);
                            this.nombresHojasCache.set(nombreDelegado, formato);
                            return formato;
                        }
                    } catch (error) {
                        continue;
                    }
                }
                
                console.log(`‚ùå No se encontr√≥ hoja para: ${nombreDelegado}`);
                return null;
            }

            generarFormatosNombre(nombreCompleto) {
                const partes = nombreCompleto.trim().split(' ').filter(p => p !== '');
                const formatos = new Set();
                
                formatos.add(nombreCompleto);
                
                if (partes.length >= 2) {
                    formatos.add(`${partes[0]} ${partes[1]}`);
                }
                
                if (partes.length >= 3) {
                    formatos.add(`${partes[0]} ${partes[1]} ${partes[2]}`);
                    formatos.add(`${partes[0]} ${partes[2]}`);
                }
                
                if (partes.length >= 4) {
                    formatos.add(`${partes[0]} ${partes[1]} ${partes[2]} ${partes[3]}`);
                    formatos.add(`${partes[0]} ${partes[2]} ${partes[3]}`);
                }
                
                const nombreSinTildes = nombreCompleto.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                formatos.add(nombreSinTildes);
                
                if (partes.length >= 2) {
                    const cortoSinTildes = `${partes[0]} ${partes[1]}`.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                    formatos.add(cortoSinTildes);
                }
                
                formatos.add(nombreCompleto.toUpperCase());
                formatos.add(nombreCompleto.toLowerCase());
                
                return Array.from(formatos);
            }

            async contarVotosHoja(nombreHoja) {
                try {
                    const url = `https://docs.google.com/spreadsheets/d/${this.sheetId}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(nombreHoja)}`;
                    const response = await fetch(url);
                    const text = await response.text();
                    
                    if (!text || text.includes('No table data')) {
                        return 0;
                    }
                    
                    const json = JSON.parse(text.substring(47).slice(0, -2));
                    const filas = json.table.rows || [];
                    
                    let votos = 0;
                    filas.forEach((fila, index) => {
                        if (index >= 7) {
                            if (fila.c && fila.c[0] && fila.c[0].v && fila.c[0].v.toString().trim() !== '') {
                                votos++;
                            }
                        }
                    });
                    
                    return votos;
                    
                } catch (error) {
                    return 0;
                }
            }

            async cargarVotosDelegado(nombreDelegado) {
                if (this.nombresHojasCache.has(nombreDelegado)) {
                    const nombreHoja = this.nombresHojasCache.get(nombreDelegado);
                    return await this.contarVotosHoja(nombreHoja);
                }
                
                const nombreHojaEncontrado = await this.encontrarHojaDelegado(nombreDelegado);
                if (nombreHojaEncontrado) {
                    return await this.contarVotosHoja(nombreHojaEncontrado);
                }
                
                return 0;
            }

            async cargarTodosLosVotos() {
                console.log('üîÑ Sincronizando con Google Sheets...');
                
                let totalGeneral = 0;
                let delegadosConExito = 0;
                const totalDelegados = this.contarTotalDelegados();
                
                const promesas = [];
                
                for (const [departamento, delegados] of Object.entries(delegadosPorDepartamento)) {
                    for (const delegado of delegados) {
                        const promesa = this.cargarVotosDelegado(delegado.nombre)
                            .then(votos => {
                                delegado.votos = votos;
                                totalGeneral += votos;
                                
                                if (votos > 0) {
                                    delegadosConExito++;
                                }
                            })
                            .catch(error => {
                                console.log(`‚ùå Error con ${delegado.nombre}`);
                            });
                        
                        promesas.push(promesa);
                        await new Promise(resolve => setTimeout(resolve, 30));
                    }
                }
                
                await Promise.allSettled(promesas);
                
                console.log(`üéØ ${delegadosConExito}/${totalDelegados} delegados - ${totalGeneral} votos totales`);
                
                this.actualizarInterfaz();
                this.mostrarContadorTotal(totalGeneral);
                
                return totalGeneral;
            }

            contarTotalDelegados() {
                let total = 0;
                for (const delegados of Object.values(delegadosPorDepartamento)) {
                    total += delegados.length;
                }
                return total;
            }

            actualizarInterfaz() {
                const modal = document.getElementById('modal-delegados');
                if (modal.style.display === 'block') {
                    const titulo = document.getElementById('modal-titulo');
                    const depto = titulo.textContent.replace('Delegados - ', '').split(' (')[0];
                    if (typeof mostrarDelegados === 'function') {
                        mostrarDelegados(depto);
                    }
                }
            }

            mostrarContadorTotal(total) {
                let counter = document.getElementById('total-votes-counter');
                
                if (!counter) {
                    counter = document.createElement('div');
                    counter.id = 'total-votes-counter';
                    counter.style.cssText = `
                        position: fixed;
                        top: 20px;
                        right: 20px;
                        background: linear-gradient(135deg, #003366, #004d99);
                        color: white;
                        padding: 15px 20px;
                        border-radius: 15px;
                        box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                        z-index: 10000;
                        font-size: 14px;
                        font-weight: bold;
                        border: 3px solid #ffd700;
                        text-align: center;
                        min-width: 180px;
                    `;
                    document.body.appendChild(counter);
                }
                
                const ahora = new Date();
                const hora = ahora.getHours().toString().padStart(2, '0');
                const minuto = ahora.getMinutes().toString().padStart(2, '0');
                
                counter.innerHTML = `
                    <div style="font-size: 11px; opacity: 0.9;">TOTAL VOTOS</div>
                    <div style="font-size: 22px; margin: 5px 0; color: #ffd700;">${total.toLocaleString()}</div>
                    <div style="font-size: 10px; opacity: 0.7;">Actualizado: ${hora}:${minuto}</div>
                `;
            }
        }
        // ============================================
        // üéØ SISTEMA MEJORADO PARA AGREGAR NUEVOS DELEGADOS
        // ============================================

        class GestorDelegados {
            constructor() {
                this.sheetId = '1yLszln1_j6ZIGw86-CGWdfEPWJr3qqVGaCwk668af54';
                this.scriptUrl = 'https://script.google.com/macros/s/AKfycbz-JI7iYEpXMMMs1Pi3BAAz5C6iPIbtA-wUwdX_1gLqiWdPEPEJNjQm539ux98aaQoF/exec'; // ‚Üê REEMPLAZA ESTO CON TU URL
                this.init();
            }

            init() {
                this.agregarEventListenersFormulario();
                this.cargarOpcionesDepartamentos();
                this.cargarDelegadosTemporales(); // Cargar delegados pendientes de guardar
            }

            agregarEventListenersFormulario() {
                const btnAgregar = document.getElementById('btn-agregar-delegado');
                const modalForm = document.getElementById('modal-formulario');
                const closeModalForm = document.querySelector('.close-modal-form');
                const form = document.getElementById('form-delegado');

                if (btnAgregar) {
                    btnAgregar.addEventListener('click', () => {
                        modalForm.style.display = 'block';
                    });
                }

                if (closeModalForm) {
                    closeModalForm.addEventListener('click', () => {
                        modalForm.style.display = 'none';
                        this.limpiarFormulario();
                    });
                }

                window.addEventListener('click', (event) => {
                    if (event.target === modalForm) {
                        modalForm.style.display = 'none';
                        this.limpiarFormulario();
                    }
                });

                if (form) {
                    form.addEventListener('submit', (event) => {
                        event.preventDefault();
                        this.guardarDelegado();
                    });
                }
            }

            cargarOpcionesDepartamentos() {
                const select = document.getElementById('departamento-delegado');
                if (!select) return;
                
                const departamentos = Object.keys(delegadosPorDepartamento).sort();
                
                departamentos.forEach(depto => {
                    const option = document.createElement('option');
                    option.value = depto;
                    option.textContent = depto;
                    select.appendChild(option);
                });
            }

            limpiarFormulario() {
                const form = document.getElementById('form-delegado');
                const btnSubmit = document.getElementById('btn-submit');
                const alertDiv = document.getElementById('form-alert');
                
                if (form) form.reset();
                if (alertDiv) alertDiv.innerHTML = '';
                if (btnSubmit) {
                    btnSubmit.disabled = false;
                    btnSubmit.classList.remove('loading');
                    btnSubmit.textContent = 'Guardar Delegado';
                }
            }

            async guardarDelegado() {
                const nombreInput = document.getElementById('nombre-delegado');
                const departamentoSelect = document.getElementById('departamento-delegado');
                const comisionSelect = document.getElementById('comision-delegado');
                const btnSubmit = document.getElementById('btn-submit');

                if (!nombreInput || !departamentoSelect || !comisionSelect || !btnSubmit) {
                    console.error('‚ùå Elementos del formulario no encontrados');
                    return;
                }

                const nombre = nombreInput.value.trim();
                const departamento = departamentoSelect.value;
                const comision = comisionSelect.value;

                if (!nombre || !departamento || !comision) {
                    this.mostrarAlerta('Por favor completa todos los campos', 'error');
                    return;
                }

                btnSubmit.disabled = true;
                btnSubmit.classList.add('loading');
                btnSubmit.textContent = 'Guardando...';

                try {
                    // Intentar guardar en Google Sheets primero
                    const exitoGoogleSheets = await this.guardarEnGoogleSheets(nombre, departamento, comision);
                    
                    if (exitoGoogleSheets) {
                        this.mostrarAlerta('‚úÖ Delegado guardado exitosamente en Google Sheets', 'success');
                    } else {
                        // Fallback a localStorage
                        this.guardarEnLocalStorage(nombre, departamento, comision);
                        this.mostrarAlerta('‚úÖ Delegado guardado localmente. Se sincronizar√° despu√©s.', 'success');
                    }
                    
                    // Actualizar la interfaz localmente
                    this.agregarDelegadoLocal(nombre, departamento, comision);
                    
                    setTimeout(() => {
                        const modalForm = document.getElementById('modal-formulario');
                        if (modalForm) modalForm.style.display = 'none';
                        this.limpiarFormulario();
                        
                        // Recargar votos para actualizar la interfaz
                        if (window.conexionInteligente) {
                            window.conexionInteligente.cargarTodosLosVotos();
                        }
                    }, 2000);
                    
                } catch (error) {
                    console.error('Error guardando delegado:', error);
                    this.mostrarAlerta('‚ùå Error al guardar el delegado. Intenta nuevamente.', 'error');
                    btnSubmit.disabled = false;
                    btnSubmit.classList.remove('loading');
                    btnSubmit.textContent = 'Guardar Delegado';
                }
            }

            async guardarEnGoogleSheets(nombre, departamento, comision) {
                const datos = {
                    nombre: nombre,
                    departamento: departamento,
                    comision: comision,
                    fecha: new Date().toISOString(),
                    votos: 0,
                    enlace: `https://docs.google.com/spreadsheets/d/${this.sheetId}/edit#gid=0`
                };

                try {
                    console.log('üì§ Enviando datos a Google Sheets:', datos);
                    
                    // Usamos un proxy para evitar problemas CORS
                    const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
                    const response = await fetch(proxyUrl + this.scriptUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(datos)
                    });

                    if (response.ok) {
                        console.log('‚úÖ Delegado guardado en Google Sheets');
                        return true;
                    } else {
                        throw new Error('Error en la respuesta del servidor');
                    }
                    
                } catch (error) {
                    console.error('‚ùå Error enviando a Google Sheets:', error);
                    return false;
                }
            }

            guardarEnLocalStorage(nombre, departamento, comision) {
                const datos = {
                    nombre: nombre,
                    departamento: departamento,
                    comision: comision,
                    fecha: new Date().toISOString(),
                    votos: 0,
                    enlace: `https://docs.google.com/spreadsheets/d/${this.sheetId}/edit#gid=0`
                };

                const delegadosTemporales = JSON.parse(localStorage.getItem('delegados_temporales') || '[]');
                delegadosTemporales.push(datos);
                localStorage.setItem('delegados_temporales', JSON.stringify(delegadosTemporales));
                console.log('üìù Delegado guardado temporalmente en localStorage:', datos);
            }

            // Funci√≥n para cargar delegados pendientes de guardar
            cargarDelegadosTemporales() {
                const delegadosTemporales = JSON.parse(localStorage.getItem('delegados_temporales') || '[]');
                
                if (delegadosTemporales.length > 0) {
                    console.log(`üìù Cargando ${delegadosTemporales.length} delegados temporales`);
                    
                    // Intentar re-enviar los delegados pendientes
                    delegadosTemporales.forEach(async (delegado, index) => {
                        setTimeout(async () => {
                            const exito = await this.guardarEnGoogleSheets(
                                delegado.nombre, 
                                delegado.departamento, 
                                delegado.comision
                            );
                            
                            if (exito) {
                                // Remover del localStorage si se guard√≥ exitosamente
                                const nuevosTemporales = delegadosTemporales.filter((_, i) => i !== index);
                                localStorage.setItem('delegados_temporales', JSON.stringify(nuevosTemporales));
                                console.log('‚úÖ Delegado temporal sincronizado con Google Sheets');
                            }
                        }, index * 1000); // Esperar 1 segundo entre cada env√≠o
                    });
                }
            }

            agregarDelegadoLocal(nombre, departamento, comision) {
                if (!delegadosPorDepartamento[departamento]) {
                    delegadosPorDepartamento[departamento] = [];
                }

                const nuevoDelegado = {
                    nombre: nombre,
                    comision: comision,
                    votos: 0,
                    enlace: `https://docs.google.com/spreadsheets/d/${this.sheetId}/edit#gid=0`
                };

                delegadosPorDepartamento[departamento].push(nuevoDelegado);
                
                this.actualizarFiltros();
                
                console.log('‚úÖ Delegado agregado localmente:', nuevoDelegado);
            }

            actualizarFiltros() {
                const selectFiltro = document.getElementById('departamento-filter');
                const selectForm = document.getElementById('departamento-delegado');
                
                const departamentos = Object.keys(delegadosPorDepartamento).sort();
                
                [selectFiltro, selectForm].forEach(select => {
                    if (select) {
                        const optionsExistentes = Array.from(select.options).slice(1);
                        optionsExistentes.forEach(opt => opt.remove());
                        
                        departamentos.forEach(depto => {
                            const option = document.createElement('option');
                            option.value = depto;
                            option.textContent = depto;
                            select.appendChild(option);
                        });
                    }
                });
            }

            mostrarAlerta(mensaje, tipo) {
                const alertDiv = document.getElementById('form-alert');
                if (alertDiv) {
                    alertDiv.innerHTML = `
                        <div class="alert alert-${tipo}">
                            ${mensaje}
                        </div>
                    `;
                }
            }
        }

        // üöÄ INICIALIZAR TODO
        document.addEventListener('DOMContentLoaded', function() {
            window.conexionInteligente = new ConexionInteligente();
            window.gestorDelegados = new GestorDelegados();
            
            console.log('‚úÖ Sistema de agregar delegados activado');
            
            const esperarMapa = setInterval(() => {
                if (window.mapaCargado) {
                    clearInterval(esperarMapa);
                    
                    setTimeout(() => {
                        window.conexionInteligente.cargarTodosLosVotos();
                    }, 3000);
                    
                    setInterval(() => {
                        window.conexionInteligente.cargarTodosLosVotos();
                    }, 45000);
                }
            }, 500);
            
            console.log('‚úÖ Sistema de sincronizaci√≥n activado');
        });
    </script>
</body>
</html>
