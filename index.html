<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vota #53 Martin Carabal√≠ - Pacto Hist√≥rico</title>
    <!-- D3.js para el mapa -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f5f5 0%, #e8f4f8 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        header {
            background: linear-gradient(135deg, #003366 0%, #004d99 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1.5rem;
            text-align: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .header-text {
            text-align: center;
        }

        .logo {
            width: 260px;
            height: 260px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 2.5rem;
            color: #003366;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
            border: 5px solid #ffd700;
            flex-shrink: 0;
            overflow: hidden;
        }

        .logo img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            object-position: center;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        h2 {
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            opacity: 0.9;
        }

        .lema {
            font-size: 1.3rem;
            font-style: italic;
            margin-top: 0.5rem;
            opacity: 0.8;
        }

        .numero-candidato {
            background: #ffd700;
            color: #003366;
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-weight: bold;
            display: inline-block;
            margin-top: 0.5rem;
            font-size: 1.2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .party-info {
            background: white;
            padding: 2.5rem;
            margin: 2rem 0;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            border-left: 5px solid #004d99;
        }

        /* =============================== */
        /* üó∫Ô∏è MAPA DE COLOMBIA */
        /* =============================== */
        .map-section {
            background: white;
            padding: 2rem;
            margin: 2rem 0;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
        }

        .map-section h2 {
            color: #003366;
            margin-bottom: 1.5rem;
            text-align: center;
        }

       #colombia-map {
            width: 100%;
            height: 1000px;
            background: #f8fbff;
            border-radius: 10px;
            overflow: hidden;
        }

        .department-path {
            fill: #ff9c03;
            stroke: #cc7d02;
            stroke-width: 1;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .department-path:hover {
            fill: #e68a00;
            stroke: #b36b00;
            stroke-width: 2;
        }
        
        .department-path.seleccionado {
            fill: #cc7d02;
            stroke: #ff9c03;
            stroke-width: 2;
        }

        .department-label {
            font-size: 12px;
            font-weight: bold;
            fill: #003366;
            pointer-events: none;
            text-anchor: middle;
        }

        .map-tooltip {
            position: absolute;
            background: rgba(0, 51, 102, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 14px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1000;
        }

        footer {
            background: linear-gradient(135deg, #003366 0%, #002244 100%);
            color: white;
            text-align: center;
            padding: 2rem 0;
            margin-top: 3rem;
        }

        @media (max-width: 768px) {
            h1 { font-size: 2rem; }
            h2 { font-size: 1.5rem; }
            #colombia-map { height: 500px !important; }
            .department-label { font-size: 8px !important; }
            .map-tooltip { font-size: 12px !important; }
        }
    </style>
</head>
<body>
   <header>
    <div class="header-content">
        <div class="logo">
            <img src="Martin.jpg" alt="Martin Carabal√≠ - Candidato #53">
        </div>
        <div class="header-text">
        <h1>Vota Senado #53 Martin Carabal√≠</h1>
        
        <p class="lema">"Todo Parece imposible hasta que se hace"</p>
        <div class="numero-candidato">#53</div>
    </header>

    <div class="container">
        <section class="party-info" style="display: none;">
            <h2>Nuestro Compromiso con Colombia</h2>
            <p>El Pacto Hist√≥rico representa la esperanza de un cambio verdadero para Colombia. Con Martin Carabal√≠ como candidato, trabajamos por una naci√≥n m√°s justa, equitativa y llena de oportunidades para todos los colombianos.</p>
        </section>

        <!-- =============================== -->
        <!-- üó∫Ô∏è MAPA DE COLOMBIA -->
        <!-- =============================== -->
        <section class="map-section">
            <h2>Departamentos de Colombia</h2>
            <div id="colombia-map"></div>
        </section>
    </div>

    <footer>
        <div class="container">
            <p>&copy; 2025 Martin Carabal√≠. Todos los derechos reservados.</p>
            <p>#53 - Todo Parece imposible hasta que se hace</p>
        </div>
    </footer>

    <script>
        // ============================================
        // üó∫Ô∏è C√ìDIGO DEL MAPA
        // ============================================
        
        document.addEventListener('DOMContentLoaded', function() {
            const mapContainer = document.getElementById('colombia-map');
            let mapaCargado = false;

            // Inicializar la aplicaci√≥n
            function inicializar() {
                cargarMapaColombia();
                agregarEventListeners();
            }

            // Cargar el mapa de Colombia
            function cargarMapaColombia() {
                const width = mapContainer.clientWidth;
                const height = 1000;

                const svg = d3.select("#colombia-map")
                    .append("svg")
                    .attr("width", width)
                    .attr("height", height);

                const g = svg.append("g");

                // Crear tooltip
                const tooltip = d3.select("body")
                    .append("div")
                    .attr("class", "map-tooltip")
                    .style("opacity", 0);

                // Cargar el GeoJSON
                d3.json("https://gist.githubusercontent.com/john-guerra/43c7656821069d00dcbc/raw/3aadedf47badbdac823b00dbe259f6bc6d9e1899/colombia.geo.json")
                    .then(function(colombia) {
                        console.log("‚úÖ GeoJSON cargado:", colombia);
                        
                        // Proyecci√≥n m√°s simple
                        const isMobile = window.innerWidth < 768;
                        const baseScale = isMobile ? 2000 : 3000;

                        let center = [-74, 4.5];
                        let translate = [width / 2, height / 2];

                        // üì± SOLO PARA M√ìVILES - ajustar posici√≥n
                        if (isMobile) {
                            translate = [width / 2, height / 1.8];
                        }

                        const projection = d3.geoMercator()
                            .center(center)
                            .scale(baseScale)
                            .translate(translate);
                        
                        console.log("üì± Dispositivo:", isMobile ? "M√≥vil" : "Computadora", "Scale:", baseScale);

                        const path = d3.geoPath().projection(projection);

                        // DIBUJAR FORMAS PRIMERO (paths)
                        g.selectAll("path")
                            .data(colombia.features)
                            .enter()
                            .append("path")
                            .attr("class", "department-path")
                            .attr("d", path)
                            .attr("data-depto", d => d.properties.NOMBRE_DPT)
                            .on("mouseover", function(event, d) {
                                const deptoMapa = d.properties.NOMBRE_DPT;
                                
                                tooltip.transition().duration(200).style("opacity", .9);
                                tooltip.html(`<strong>${deptoMapa}</strong>`)
                                    .style("left", (event.pageX + 10) + "px")
                                    .style("top", (event.pageY - 28) + "px");

                                d3.select(this).style("fill", "#004d99");
                            })
                            .on("mouseout", function(d) {
                                tooltip.transition().duration(500).style("opacity", 0);
                                d3.select(this).style("fill", "#ff9c03");
                            })
                            .on("click", function(event, d) {
                                const depto = d.properties.NOMBRE_DPT;
                                
                                // Solo resaltar, sin mostrar delegados
                                g.selectAll(".department-path").style("fill", "#ff9c03");
                                d3.select(this).style("fill", "#cc7d02");
                                
                                console.log("Departamento seleccionado:", depto);
                            });

                        // LUEGO ETIQUETAS
                        g.selectAll("text")
                            .data(colombia.features)
                            .enter()
                            .append("text")
                            .attr("class", "department-label")
                            .attr("transform", d => `translate(${path.centroid(d)})`)
                            .attr("dy", ".35em")
                            .text(d => {
                                const nombre = d.properties.NOMBRE_DPT;
                                if (nombre === "Norte de Santander") return "N. Santander";
                                if (nombre === "Archipi√©lago de San Andr√©s") return "San Andr√©s";
                                if (nombre.length > 8) return nombre.substring(0, 8) + ".";
                                return nombre;
                            });

                        mapaCargado = true;
                    })
                    .catch(function(error) {
                        console.error("‚ùå Error cargando el mapa:", error);
                        mapContainer.innerHTML = `
                            <div style="text-align: center; padding: 2rem; color: #666;">
                                <h3>Error cargando el mapa</h3>
                                <p>No se pudo cargar el mapa de Colombia: ${error.message}</p>
                            </div>
                        `;
                    });
            }

            // Agregar event listeners
            function agregarEventListeners() {
                // Redimensionar mapa cuando cambie el tama√±o de la ventana
                window.addEventListener('resize', function() {
                    if (mapaCargado) {
                        console.log("üîÑ Redimensionando ventana...");
                        cargarMapaColombia();
                    }
                });
            }

            // Inicializar la aplicaci√≥n
            inicializar();
        });
    </script>
</body>
</html>
